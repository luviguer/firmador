<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Participant VCs en 4 pasos</title>
    <link rel="stylesheet" href="style_principal.css">

    <script>

        function navigateToStep(stepNumber) {
            
            let formAction = "";
            let previousStep = stepNumber - 1;

            if (localStorage.getItem("step" + stepNumber) !== "true") {
            // Si el paso no está marcado como completado, mostrar mensaje de error
            alert("Por favor, complete el paso anterior antes de continuar.");
            return;  // Detener la ejecución si el paso no está completado
            }
           

            
            // Asignar la URL de acción del formulario según el paso actual
            if (stepNumber === 1) {
                formAction = "startParticipant";  
            } else if (stepNumber === 2) {
                formAction = "createParticipant";  
            } else if (stepNumber === 3) {
                formAction = "data";  // Redirigir al link de "data"
            } else if (stepNumber === 4) {
                formAction = "termsAndConditions";  // Redirigir al link de "termsAndConditions"
            }

            window.location.href = formAction;


         
        }


        window.onload = function() {

            localStorage.clear();

            let activeStepElement = document.querySelector('.step.active');
    
            if (activeStepElement) {
                // Obtener el número del paso activo
                let currentStep = parseInt(activeStepElement.querySelector('.step-number').innerText);
                
                // Marcar el paso activo como completado en localStorage
                localStorage.setItem("step" + currentStep, "true");

                // (Opcional) También puedes marcar los pasos anteriores como completados
                for (let i = 1; i <= currentStep; i++) {
                    localStorage.setItem("step" + i, "true");
                }
            }
        }

    </script>

</head>
<body>
    <form th:action="@{/createParticipant}" method="GET" enctype="multipart/form-data"> 
        <div class="center-content">
            <div class="container">
                <div class="title">Participant VCs en 4 pasos</div>
                <div class="steps">
                    <div class="step active" onclick="navigateToStep(1)">
                        <div class="step-number">1</div>
                        Start
                    </div>
                    <div class="step" onclick="navigateToStep(2)">
                        <div class="step-number" >2</div>
                        Participant & Registration Number
                    </div>
                    <div class="step" onclick="navigateToStep(3)">
                        <div class="step-number">3</div>
                        Terms & Conditions
                    </div>
                    <div class="step" onclick="navigateToStep(4)">
                        <div class="step-number">4</div>
                        Sign
                    </div>
                </div>
                <div class="description">
                    Siga los pasos para emitir las credenciales verificables necesarias para aprobar el cumplimiento.
                    Una vez completado, obtendrá 3 credenciales verificables: participante legal, número de registro legal y términos y condiciones.
                </div>
                
                <div class="button-container">
                    <button type="submit" class="start-button">START</button>
                </div>
            </div>
        </div>
    </form>
</body>
</html>